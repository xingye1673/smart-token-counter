# 更新日志

本文档记录智能Token计数器插件的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 待添加
- 更多LLM模型的分词支持
- 批量文件Token计数功能
- Token使用统计报告
- 自定义分词规则
- 导出Token计数报告

### 待修复
- 大文件性能优化
- 内存使用优化

## [1.2.0] - 2025-08-06

### 🎉 主要新增
- ✨ **可配置颜色提醒**：新增 `enableColorWarning` 配置项，可选择是否启用超过阈值时的颜色变化
- 🎨 **动态图标显示**：状态栏使用动态图标
  - 文件模式：`$(file-code)` 文件图标
  - 选择模式：`$(selection)` 选择图标
- 📊 **选择对比显示**：选择文本时同时显示选择区域和文件总数
  - 文件：`$(file-code) 1.2K T`
  - 选择：`$(selection) 0.5K / 1.2K T`
- 🏷️ **简化显示格式**：使用 `T` 作为Token单位标识，格式更简洁

### 🔄 改进优化
- 📝 **友好文案**：将"警告/危险"阈值改为"提醒/关注"阈值，降低警示性
- 💡 **智能提示**：悬停工具提示显示更详细的信息，包括：
  - 当前显示内容
  - 选择模式下的文件总数对比
  - 分词器类型和阈值配置
  - 根据状态显示不同的提醒图标（💡提醒、🔥关注）
- ⚡ **性能优化**：改进了token计算逻辑，避免重复计算文件总数

### 🛠️ 技术改进
- 🔧 **代码重构**：优化了 `StatusBarManager` 和 `extension.ts` 的代码结构
- 📦 **配置升级**：新增配置项的JSON Schema定义和国际化支持
- 🌍 **多语言**：更新了中英文语言包，支持新功能的本地化

## [1.1.0] - 2025-08-06

### 新增
- ✨ 智能数量格式化：超过1K显示K单位，超过1M显示M单位，保留一位小数
- 🔧 手动刷新命令：在手动更新模式下可手动刷新token计数
- ⚡ 性能优化：减少状态栏闪烁，添加防抖更新机制

### 改进
- 📊 优化了三种更新模式的实现逻辑
  - `realtime`: 实时更新（文本变化和选择变化时）
  - `onSave`: 保存时更新（仅在文档保存时）
  - `manual`: 手动更新（需要执行刷新命令）
- 🎨 减少界面闪烁：移除"计算中"显示，采用50ms防抖更新
- 🔄 智能缓存：相同内容不重复更新显示

### 修复
- 🐛 修复manual模式未正确实现的问题
- 🐛 修复频繁切换编辑器时状态栏闪烁的问题

## [1.0.0] - 2025-08-05

### 新增
- ✨ 实时Token计数功能
- 🌍 国际化支持（简体中文、英文）
- 🤖 多种LLM分词方案支持
  - GPT-3.5 Turbo
  - GPT-4
  - Claude
  - LLaMA
  - 中文分词
  - 简单分词
- ⚙️ 完整的配置系统
  - 可配置警告和危险阈值
  - 支持实时、保存时、手动更新模式
  - 状态栏显示开关
- 🎨 智能颜色警示系统
  - 绿色：正常范围
  - 黄色：接近警告阈值
  - 红色：超过危险阈值
- 📊 状态栏集成
  - 友好的图标显示
  - 详细的工具提示信息
  - 快速设置访问
- 🔧 开发者友好功能
  - 完整的TypeScript类型支持
  - 详细的中文注释
  - 模块化架构设计

### 技术特性
- 基于VSCode Extension API构建
- TypeScript开发，类型安全
- 模块化架构设计
- 性能优化的异步Token计算
- 完整的错误处理机制

### 支持的功能
- 当前文件Token计数
- 选择区域Token计数
- 多语言界面
- 配置热更新
- 命令面板集成
